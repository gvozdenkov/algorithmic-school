var F=Object.defineProperty;var H=(e,t,o)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var a=(e,t,o)=>(H(e,typeof t!="symbol"?t+"":t,o),o);import{r as l,j as c,I,c as P}from"./index-062b9af9.js";import{S as B,B as _,s as L,a as E}from"./sleep-e23208a3.js";import{H as N}from"./element-captions-6dbe28ed.js";import{u as V,C as M}from"./use-fucus-c6490001.js";class b{constructor(t){a(this,"stack",[]);a(this,"size",0);a(this,"getSize",()=>this.stack.length);a(this,"getStack",()=>this.stack);a(this,"clearStack",()=>this.stack=[]);a(this,"push",t=>this.getSize()<this.size?this.stack.push(t):null);a(this,"pop",()=>this.getSize()?this.stack.pop():void 0);a(this,"peak",()=>this.stack[this.getSize()-1]||null);this.size=t}}const O="_form_1u514_1",Y="_form__input_1u514_7",$="_resultList_1u514_12",q="_resultList__item_1u514_19",G="_circle_invisible_1u514_23",m={form:O,form__input:Y,resultList:$,resultList__item:q,circle_invisible:G},g=10,tt=()=>{const[e,t]=l.useState(""),[o,u]=l.useState([]),[C,r]=l.useState([]),[j,R]=l.useState(!1),[d,p]=l.useState("idle"),[v,h]=V(),i=l.useRef(new b(g)).current,s=l.useRef(new b(g)).current,k=i.getStack().length,f=d!=="idle",z=!e||k>=g,x=f||k===0,T=n=>{t(n.currentTarget.value)},w=async n=>{n.preventDefault(),p("addToHead"),R(!0),i.push(e),s.push("changing"),u(i.getStack()),r(s.getStack()),t(""),await L(E),u(i.getStack()),s.pop(),s.push("default"),r(s.getStack()),p("idle"),h()},y=async()=>{p("removeFromTail"),u(i.getStack()),s.pop(),s.push("changing"),r(s.getStack()),await L(300),i.pop(),s.pop(),r(s.getStack()),u(i.getStack()),p("idle"),h()},D=()=>{i.clearStack(),s.clearStack(),u([]),r([]),h()},A=n=>n===k-1&&N;return c.jsxs(B,{title:"Стек",children:[c.jsxs("form",{className:m.form,onSubmit:w,children:[c.jsx(I,{value:e,maxLength:4,isLimitText:!0,onChange:T,disabled:f,extraClass:m.form__input,autoComplete:"off",ref:v,autoFocus:!0}),c.jsx(_,{text:"Добавить",isLoader:d==="addToHead",disabled:z,type:"submit",extraClass:"ml-6"}),c.jsx(_,{text:"Удалить",isLoader:d==="removeFromTail",onClick:y,disabled:x,type:"button",extraClass:"ml-6"}),c.jsx(_,{text:"Очистить",type:"button",onClick:D,disabled:x,extraClass:"ml-auto"})]}),j&&c.jsx("ul",{className:P(m.resultList,"mt-24"),children:o.map((n,S)=>c.jsx("li",{className:m.resultList__item,children:c.jsx(M,{letter:n,index:S,state:C[S],head:A(S)})},S))})]})};export{tt as StackPage};
