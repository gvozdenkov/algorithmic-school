var F=Object.defineProperty;var H=(s,t,i)=>t in s?F(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var c=(s,t,i)=>(H(s,typeof t!="symbol"?t+"":t,i),i);import{r as l,j as o,I,c as P}from"./index-298ce0e6.js";import{S as B,B as _,s as b,a as E}from"./sleep-20444c3a.js";import{H as N}from"./element-captions-6dbe28ed.js";import{u as V,C as $}from"./use-fucus-6086a647.js";class C{constructor(t){c(this,"stack",[]);c(this,"size",0);c(this,"getSize",()=>this.stack.length);c(this,"getStack",()=>this.stack);c(this,"clearStack",()=>this.stack=[]);c(this,"push",t=>this.getSize()<this.size?this.stack.push(t):null);c(this,"pop",()=>this.getSize()?this.stack.pop():void 0);c(this,"peak",()=>this.stack[this.getSize()-1]||null);this.size=t}}const M="_form_3o0kd_1",O="_form__input_3o0kd_10",r={form:M,form__input:O,"result-list":"_result-list_3o0kd_15","clear-btn":"_clear-btn_3o0kd_24","add-btn":"_add-btn_3o0kd_28","delete-btn":"_delete-btn_3o0kd_32"},g=10,W=()=>{const[s,t]=l.useState(""),[i,u]=l.useState([]),[j,d]=l.useState([]),[R,v]=l.useState(!1),[S,k]=l.useState("idle"),[z,h]=V(),n=l.useRef(new C(g)).current,e=l.useRef(new C(g)).current,m=n.getStack().length,f=S!=="idle",T=!s||m>=g,x=f||m===0,w=a=>{t(a.currentTarget.value)},y=async a=>{a.preventDefault(),k("addToHead"),v(!0),n.push(s),e.push("changing"),u(n.getStack()),d(e.getStack()),t(""),await b(E),u(n.getStack()),e.pop(),e.push("default"),d(e.getStack()),k("idle"),h()},D=async()=>{k("removeFromTail"),u(n.getStack()),e.pop(),e.push("changing"),d(e.getStack()),await b(300),n.pop(),e.pop(),d(e.getStack()),u(n.getStack()),k("idle"),h()},L=()=>{n.clearStack(),e.clearStack(),u([]),d([]),h()},A=a=>a===m-1&&N;return o.jsxs(B,{title:"Стек",children:[o.jsxs("form",{className:r.form,onSubmit:a=>void y(a),children:[o.jsx(I,{value:s,maxLength:3,isLimitText:!0,onChange:w,disabled:f,extraClass:r.form__input,autoComplete:"off",ref:z,autoFocus:!0,"data-test":"input"}),o.jsx(_,{text:"Добавить",isLoader:S==="addToHead",disabled:T,type:"submit",extraClass:r["add-btn"],"data-test":"add-btn"}),o.jsx(_,{text:"Удалить",isLoader:S==="removeFromTail",onClick:()=>void D(),disabled:x,type:"button",extraClass:r["delete-btn"],"data-test":"remove-btn"}),o.jsx(_,{text:"Очистить",type:"button",onClick:L,disabled:x,extraClass:r["clear-btn"],"data-test":"clear-btn"})]}),R&&o.jsx("ul",{className:P(r["result-list"]),children:i.map((a,p)=>o.jsx("li",{children:o.jsx($,{letter:a,index:p,state:j[p],head:A(p),"data-test":`circle-${p}`})},p))})]})};export{W as StackPage};
