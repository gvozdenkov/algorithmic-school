var w=Object.defineProperty;var z=(t,e,i)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var s=(t,e,i)=>(z(t,typeof e!="symbol"?e+"":e,i),i);import{r as c,j as a,I as A,c as D}from"./index-aa68e019.js";import{S as F,B as p,s as L,a as q}from"./sleep-5681d319.js";import{u as I,C as N}from"./use-fucus-303cb70c.js";import{T as R,H as P}from"./element-captions-6dbe28ed.js";class B{constructor(e){s(this,"head",0);s(this,"tail",-1);s(this,"length",0);s(this,"size",0);s(this,"queue",[]);s(this,"getLength",()=>this.length);s(this,"getHead",()=>this.head%this.size);s(this,"getTail",()=>this.tail===-1?0:this.tail%this.size);s(this,"isEmpty",()=>this.getLength()===0);s(this,"enqueue",e=>{if(this.length>=this.size)throw new Error("Maximum length exceeded");this.tail=this.tail%this.size===-1?0:this.tail+1,this.queue[this.tail%this.size]=e,this.length++});s(this,"dequeue",()=>{if(this.isEmpty())throw new Error("No elements in the queue");this.queue[this.head%this.size]=void 0,this.length--,this.head=this.length?this.head+1:0,this.tail=this.length?this.tail:-1});s(this,"peak",()=>{if(this.isEmpty())throw new Error("No elements in the queue");return this.queue[this.head]});s(this,"getQueue",()=>this.queue);s(this,"clearQueue",()=>{this.queue=[...Array(this.size)],this.head=0,this.tail=-1,this.length=0});this.size=e,this.queue=[...Array(e)]}}const k=t=>(e,i)=>e==="addToTail"&&i===t.getTail()||e==="removeFromHead"&&i===t.getHead()?"changing":"default",M=t=>e=>e===t.getTail()&&t.getLength()>0&&R,V=t=>e=>e===t.getHead()&&t.getLength()>0&&P,O="_form_1puxp_1",Y="_form__input_1puxp_7",$="_resultList_1puxp_12",G="_resultList__item_1puxp_19",J="_circle_invisible_1puxp_23",d={form:O,form__input:Y,resultList:$,resultList__item:G,circle_invisible:J},_=8,T=[...Array(_)],te=()=>{const[t,e]=c.useState(""),[i,r]=c.useState(T),[l,h]=c.useState("idle"),[b,m]=I(),u=c.useRef(new B(_)).current,x=u.getLength(),g=l!=="idle",y=g||x>=_||!t,f=g||!x,C=k(u),Q=V(u),j=M(u),H=n=>{e(n.currentTarget.value)},v=()=>{u.clearQueue(),r(T),e(""),m()},E=async n=>{n.preventDefault(),h("addToTail"),u.enqueue(t),r(u.getQueue()),e(""),await L(q),h("idle"),m()},S=async()=>{h("removeFromHead"),r(u.getQueue()),await L(q),u.dequeue(),r(u.getQueue()),h("idle"),m()};return a.jsxs(F,{title:"Очередь",children:[a.jsxs("form",{className:d.form,onSubmit:E,children:[a.jsx(A,{value:t,maxLength:4,isLimitText:!0,onChange:H,disabled:g,extraClass:d.form__input,autoComplete:"off",ref:b,autoFocus:!0}),a.jsx(p,{text:"Добавить",isLoader:l==="addToTail",disabled:y,type:"submit",extraClass:"ml-6"}),a.jsx(p,{text:"Удалить",onClick:S,isLoader:l==="removeFromHead",disabled:f,type:"button",extraClass:"ml-6"}),a.jsx(p,{text:"Очистить",onClick:v,disabled:f,type:"button",extraClass:"ml-auto"})]}),a.jsx("ul",{className:D(d.resultList,"mt-24"),children:i.map((n,o)=>a.jsx("li",{className:d.resultList__item,children:a.jsx(N,{letter:n,index:o,state:C(l,o),head:Q(o),tail:j(o)})},o))})]})};export{te as QueuePage};
