var w=Object.defineProperty;var z=(t,e,a)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var s=(t,e,a)=>(z(t,typeof e!="symbol"?e+"":e,a),a);import{r as c,j as u,I as A,c as D}from"./index-298ce0e6.js";import{S as F,B as _,s as b,a as j}from"./sleep-20444c3a.js";import{u as I,C as R}from"./use-fucus-6086a647.js";import{T as N,H as P}from"./element-captions-6dbe28ed.js";class B{constructor(e){s(this,"head",0);s(this,"tail",-1);s(this,"length",0);s(this,"size",0);s(this,"queue",[]);s(this,"getLength",()=>this.length);s(this,"getHead",()=>this.head%this.size);s(this,"getTail",()=>this.tail===-1?0:this.tail%this.size);s(this,"isEmpty",()=>this.getLength()===0);s(this,"enqueue",e=>{if(this.length>=this.size)throw new Error("Maximum length exceeded");this.tail=this.tail%this.size===-1?0:this.tail+1,this.queue[this.tail%this.size]=e,this.length++});s(this,"dequeue",()=>{if(this.isEmpty())throw new Error("No elements in the queue");this.queue[this.head%this.size]=void 0,this.length--,this.head=this.length?this.head+1:0,this.tail=this.length?this.tail:-1});s(this,"peak",()=>{if(this.isEmpty())throw new Error("No elements in the queue");return this.queue[this.head]});s(this,"getQueue",()=>this.queue);s(this,"clearQueue",()=>{this.queue=[...Array(this.size)],this.head=0,this.tail=-1,this.length=0});this.size=e,this.queue=[...Array(e)]}}const k=t=>(e,a)=>e==="addToTail"&&a===t.getTail()||e==="removeFromHead"&&a===t.getHead()?"changing":"default",M=t=>e=>e===t.getTail()&&t.getLength()>0&&N,V=t=>e=>e===t.getHead()&&t.getLength()>0&&P,$="_form_cjrau_1",O="_form__input_cjrau_11",o={form:$,form__input:O,"result-list":"_result-list_cjrau_16","clear-btn":"_clear-btn_cjrau_26","add-btn":"_add-btn_cjrau_30","delete-btn":"_delete-btn_cjrau_34"},p=7,q=[...Array(p)],X=()=>{const[t,e]=c.useState(""),[a,l]=c.useState(q),[h,d]=c.useState("idle"),[T,g]=I(),i=c.useRef(new B(p)).current,f=i.getLength(),m=h!=="idle",L=m||f>=p||!t,x=m||!f,C=k(i),Q=V(i),H=M(i),v=n=>{e(n.currentTarget.value)},y=()=>{i.clearQueue(),l(q),e(""),g()},E=async n=>{n.preventDefault(),d("addToTail"),i.enqueue(t),l(i.getQueue()),e(""),await b(j),d("idle"),g()},S=async()=>{d("removeFromHead"),l(i.getQueue()),await b(j),i.dequeue(),l(i.getQueue()),d("idle"),g()};return u.jsxs(F,{title:"Очередь",children:[u.jsxs("form",{className:o.form,onSubmit:n=>void E(n),children:[u.jsx(A,{value:t,maxLength:4,isLimitText:!0,onChange:v,disabled:m,extraClass:o.form__input,autoComplete:"off",ref:T,autoFocus:!0,"data-test":"input"}),u.jsx(_,{type:"submit",text:"Добавить",isLoader:h==="addToTail",disabled:L,extraClass:o["add-btn"],"data-test":"add-btn"}),u.jsx(_,{text:"Удалить",onClick:()=>void S(),isLoader:h==="removeFromHead",disabled:x,extraClass:o["delete-btn"],"data-test":"remove-btn"}),u.jsx(_,{text:"Очистить",onClick:y,disabled:x,extraClass:o["clear-btn"],"data-test":"clear-btn"})]}),u.jsx("ul",{className:D(o["result-list"]),children:a.map((n,r)=>u.jsx("li",{children:u.jsx(R,{letter:n,index:r,state:C(h,r),head:Q(r),tail:H(r),"data-test":`circle-${r}`})},r))})]})};export{X as QueuePage};
